map = {
    [0] = {[0]=32,[1]=33,[2]=33,[3]=33,[4]=33,[5]=33,[6]=33,[7]=33,[8]=33,[9]=33,[10]=33,[11]=33,[12]=33,[13]=33,[14]=33,[15]=33,[16]=33,[17]=33,[18]=33,[19]=33,[20]=33,[21]=33,[22]=33,[23]=33,[24]=33,[25]=33,[26]=33,[27]=33,[28]=33,[29]=33,[30]=33,[31]=35},
    [1] = {[0]=40,[1]=11,[2]=4,[3]=4,[4]=4,[5]=4,[6]=4,[7]=4,[8]=4,[9]=4,[10]=4,[11]=4,[12]=4,[13]=4,[14]=4,[15]=4,[16]=4,[17]=4,[18]=4,[19]=4,[20]=4,[21]=4,[22]=4,[23]=4,[24]=4,[25]=4,[26]=4,[27]=4,[28]=4,[29]=4,[30]=11,[31]=43},
    [2] = {[0]=40,[1]=4,[2]=4,[3]=4,[4]=4,[5]=4,[6]=4,[7]=4,[8]=4,[9]=4,[10]=4,[11]=4,[12]=4,[13]=4,[14]=4,[15]=4,[16]=4,[17]=4,[18]=4,[19]=4,[20]=4,[21]=4,[22]=4,[23]=4,[24]=4,[25]=4,[26]=4,[27]=4,[28]=4,[29]=4,[30]=4,[31]=43},
    [3] = {[0]=40,[1]=4,[2]=4,[3]=4,[4]=4,[5]=4,[6]=4,[7]=4,[8]=4,[9]=4,[10]=4,[11]=4,[12]=4,[13]=4,[14]=4,[15]=4,[16]=4,[17]=4,[18]=4,[19]=4,[20]=4,[21]=4,[22]=4,[23]=4,[24]=4,[25]=4,[26]=4,[27]=4,[28]=4,[29]=4,[30]=4,[31]=43},
    [4] = {[0]=40,[1]=11,[2]=4,[3]=4,[4]=4,[5]=4,[6]=4,[7]=4,[8]=4,[9]=4,[10]=4,[11]=4,[12]=4,[13]=4,[14]=14,[15]=14,[16]=4,[17]=4,[18]=4,[19]=4,[20]=4,[21]=4,[22]=4,[23]=4,[24]=4,[25]=4,[26]=4,[27]=4,[28]=4,[29]=4,[30]=4,[31]=43},
    [5] = {[0]=40,[1]=4,[2]=4,[3]=4,[4]=4,[5]=4,[6]=4,[7]=4,[8]=4,[9]=4,[10]=4,[11]=4,[12]=4,[13]=4,[14]=14,[15]=26,[16]=4,[17]=4,[18]=4,[19]=4,[20]=4,[21]=4,[22]=4,[23]=11,[24]=4,[25]=4,[26]=4,[27]=4,[28]=4,[29]=4,[30]=4,[31]=43},
    [6] = {[0]=40,[1]=4,[2]=4,[3]=4,[4]=4,[5]=4,[6]=4,[7]=4,[8]=4,[9]=4,[10]=4,[11]=4,[12]=4,[13]=4,[14]=4,[15]=4,[16]=4,[17]=4,[18]=4,[19]=4,[20]=4,[21]=4,[22]=4,[23]=4,[24]=4,[25]=4,[26]=4,[27]=4,[28]=4,[29]=4,[30]=4,[31]=43},
    [7] = {[0]=40,[1]=4,[2]=4,[3]=4,[4]=4,[5]=4,[6]=4,[7]=4,[8]=4,[9]=4,[10]=4,[11]=4,[12]=4,[13]=4,[14]=4,[15]=4,[16]=4,[17]=4,[18]=4,[19]=4,[20]=4,[21]=4,[22]=4,[23]=4,[24]=4,[25]=4,[26]=4,[27]=4,[28]=4,[29]=4,[30]=4,[31]=43},
    [8] = {[0]=40,[1]=4,[2]=4,[3]=4,[4]=4,[5]=4,[6]=4,[7]=4,[8]=4,[9]=3,[10]=4,[11]=4,[12]=4,[13]=4,[14]=4,[15]=4,[16]=4,[17]=4,[18]=4,[19]=4,[20]=4,[21]=4,[22]=4,[23]=4,[24]=4,[25]=11,[26]=4,[27]=4,[28]=4,[29]=4,[30]=4,[31]=43}, 
    [9] = {[0]=40,[1]=4,[2]=11,[3]=4,[4]=4,[5]=4,[6]=4,[7]=4,[8]=4,[9]=4,[10]=4,[11]=4,[12]=4,[13]=4,[14]=4,[15]=4,[16]=4,[17]=4,[18]=4,[19]=4,[20]=4,[21]=4,[22]=4,[23]=4,[24]=4,[25]=4,[26]=4,[27]=4,[28]=4,[29]=4,[30]=4,[31]=43},
    [10] = {[0]=40,[1]=4,[2]=4,[3]=4,[4]=4,[5]=4,[6]=4,[7]=4,[8]=3,[9]=4,[10]=4,[11]=4,[12]=4,[13]=4,[14]=4,[15]=4,[16]=4,[17]=4,[18]=4,[19]=4,[20]=4,[21]=4,[22]=4,[23]=4,[24]=4,[25]=4,[26]=4,[27]=4,[28]=4,[29]=11,[30]=4,[31]=43},
    [11] = {[0]=40,[1]=4,[2]=4,[3]=4,[4]=4,[5]=4,[6]=4,[7]=4,[8]=4,[9]=4,[10]=4,[11]=4,[12]=4,[13]=4,[14]=4,[15]=4,[16]=4,[17]=4,[18]=4,[19]=4,[20]=4,[21]=4,[22]=4,[23]=4,[24]=4,[25]=4,[26]=4,[27]=4,[28]=4,[29]=4,[30]=4,[31]=43},
    [12] = {[0]=40,[1]=4,[2]=4,[3]=4,[4]=4,[5]=4,[6]=4,[7]=4,[8]=4,[9]=4,[10]=4,[11]=4,[12]=4,[13]=4,[14]=4,[15]=4,[16]=4,[17]=4,[18]=4,[19]=4,[20]=4,[21]=4,[22]=4,[23]=4,[24]=4,[25]=4,[26]=4,[27]=4,[28]=4,[29]=4,[30]=4,[31]=43},
    [13] = {[0]=40,[1]=4,[2]=4,[3]=4,[4]=4,[5]=4,[6]=4,[7]=4,[8]=11,[9]=4,[10]=4,[11]=4,[12]=4,[13]=4,[14]=4,[15]=4,[16]=4,[17]=4,[18]=4,[19]=4,[20]=4,[21]=4,[22]=4,[23]=4,[24]=4,[25]=4,[26]=4,[27]=4,[28]=4,[29]=4,[30]=4,[31]=43},
    [14] = {[0]=40,[1]=4,[2]=4,[3]=4,[4]=4,[5]=4,[6]=4,[7]=4,[8]=4,[9]=4,[10]=4,[11]=4,[12]=0,[13]=1,[14]=1,[15]=1,[16]=1,[17]=1,[18]=1,[19]=1,[20]=2,[21]=4,[22]=4,[23]=4,[24]=4,[25]=4,[26]=4,[27]=4,[28]=4,[29]=4,[30]=4,[31]=43},
    [15] = {[0]=40,[1]=4,[2]=4,[3]=4,[4]=4,[5]=4,[6]=4,[7]=4,[8]=4,[9]=4,[10]=4,[11]=4,[12]=8,[13]=5,[14]=6,[15]=6,[16]=6,[17]=6,[18]=6,[19]=7,[20]=10,[21]=4,[22]=4,[23]=4,[24]=4,[25]=4,[26]=4,[27]=4,[28]=4,[29]=4,[30]=4,[31]=43},
    [16] = {[0]=40,[1]=4,[2]=4,[3]=4,[4]=4,[5]=4,[6]=4,[7]=4,[8]=4,[9]=4,[10]=4,[11]=4,[12]=8,[13]=13,[14]=14,[15]=14,[16]=14,[17]=14,[18]=14,[19]=15,[20]=10,[21]=4,[22]=4,[23]=4,[24]=4,[25]=4,[26]=4,[27]=4,[28]=4,[29]=4,[30]=4,[31]=43},
    [17] = {[0]=40,[1]=4,[2]=4,[3]=4,[4]=11,[5]=4,[6]=4,[7]=4,[8]=4,[9]=4,[10]=4,[11]=4,[12]=8,[13]=21,[14]=22,[15]=22,[16]=22,[17]=22,[18]=22,[19]=23,[20]=10,[21]=4,[22]=4,[23]=4,[24]=4,[25]=4,[26]=4,[27]=4,[28]=4,[29]=4,[30]=4,[31]=43}, 
    [18] = {[0]=40,[1]=4,[2]=4,[3]=4,[4]=4,[5]=4,[6]=4,[7]=4,[8]=4,[9]=4,[10]=4,[11]=4,[12]=16,[13]=17,[14]=17,[15]=17,[16]=17,[17]=17,[18]=17,[19]=17,[20]=18,[21]=4,[22]=4,[23]=4,[24]=4,[25]=4,[26]=4,[27]=4,[28]=4,[29]=4,[30]=4,[31]=43},
    [19] = {[0]=40,[1]=4,[2]=4,[3]=4,[4]=4,[5]=4,[6]=4,[7]=4,[8]=4,[9]=4,[10]=4,[11]=4,[12]=4,[13]=4,[14]=4,[15]=4,[16]=4,[17]=4,[18]=4,[19]=4,[20]=4,[21]=4,[22]=4,[23]=4,[24]=4,[25]=4,[26]=4,[27]=4,[28]=4,[29]=4,[30]=4,[31]=43},
    [20] = {[0]=40,[1]=4,[2]=4,[3]=4,[4]=4,[5]=4,[6]=4,[7]=4,[8]=4,[9]=4,[10]=4,[11]=4,[12]=4,[13]=4,[14]=4,[15]=4,[16]=4,[17]=4,[18]=4,[19]=4,[20]=4,[21]=4,[22]=4,[23]=4,[24]=4,[25]=4,[26]=4,[27]=4,[28]=4,[29]=4,[30]=4,[31]=43},
    [21] = {[0]=40,[1]=4,[2]=11,[3]=4,[4]=4,[5]=4,[6]=4,[7]=4,[8]=4,[9]=4,[10]=11,[11]=4,[12]=4,[13]=4,[14]=4,[15]=4,[16]=4,[17]=4,[18]=4,[19]=4,[20]=4,[21]=4,[22]=4,[23]=4,[24]=4,[25]=4,[26]=4,[27]=4,[28]=4,[29]=4,[30]=4,[31]=43},
    [22] = {[0]=40,[1]=4,[2]=4,[3]=4,[4]=4,[5]=4,[6]=4,[7]=4,[8]=4,[9]=4,[10]=4,[11]=4,[12]=4,[13]=4,[14]=4,[15]=4,[16]=4,[17]=4,[18]=4,[19]=4,[20]=4,[21]=4,[22]=4,[23]=4,[24]=4,[25]=4,[26]=4,[27]=4,[28]=4,[29]=4,[30]=4,[31]=43},
    [23] = {[0]=40,[1]=4,[2]=4,[3]=4,[4]=4,[5]=4,[6]=4,[7]=4,[8]=4,[9]=4,[10]=4,[11]=4,[12]=4,[13]=4,[14]=4,[15]=4,[16]=4,[17]=4,[18]=4,[19]=4,[20]=4,[21]=4,[22]=4,[23]=4,[24]=4,[25]=4,[26]=4,[27]=4,[28]=4,[29]=4,[30]=4,[31]=43},
    [24] = {[0]=40,[1]=4,[2]=4,[3]=4,[4]=4,[5]=4,[6]=4,[7]=4,[8]=4,[9]=4,[10]=4,[11]=4,[12]=4,[13]=4,[14]=4,[15]=4,[16]=4,[17]=4,[18]=4,[19]=4,[20]=4,[21]=4,[22]=4,[23]=4,[24]=4,[25]=4,[26]=4,[27]=4,[28]=4,[29]=4,[30]=4,[31]=43},
    [25] = {[0]=40,[1]=4,[2]=4,[3]=4,[4]=4,[5]=4,[6]=4,[7]=4,[8]=4,[9]=4,[10]=4,[11]=4,[12]=4,[13]=4,[14]=4,[15]=4,[16]=4,[17]=4,[18]=4,[19]=4,[20]=4,[21]=4,[22]=4,[23]=4,[24]=4,[25]=4,[26]=4,[27]=4,[28]=4,[29]=4,[30]=4,[31]=43},
    [26] = {[0]=40,[1]=4,[2]=4,[3]=4,[4]=4,[5]=4,[6]=4,[7]=4,[8]=4,[9]=11,[10]=4,[11]=4,[12]=4,[13]=4,[14]=4,[15]=4,[16]=4,[17]=4,[18]=4,[19]=4,[20]=4,[21]=4,[22]=4,[23]=4,[24]=4,[25]=4,[26]=4,[27]=4,[28]=4,[29]=4,[30]=4,[31]=43},
    [27] = {[0]=40,[1]=4,[2]=4,[3]=4,[4]=4,[5]=4,[6]=4,[7]=4,[8]=4,[9]=4,[10]=4,[11]=4,[12]=4,[13]=4,[14]=4,[15]=4,[16]=4,[17]=4,[18]=4,[19]=4,[20]=4,[21]=4,[22]=4,[23]=4,[24]=4,[25]=4,[26]=4,[27]=4,[28]=4,[29]=4,[30]=4,[31]=43},
    [28] = {[0]=40,[1]=4,[2]=4,[3]=4,[4]=4,[5]=4,[6]=4,[7]=4,[8]=4,[9]=4,[10]=4,[11]=4,[12]=4,[13]=4,[14]=4,[15]=4,[16]=4,[17]=4,[18]=4,[19]=4,[20]=4,[21]=4,[22]=4,[23]=4,[24]=4,[25]=4,[26]=4,[27]=4,[28]=4,[29]=4,[30]=4,[31]=43},
    [29] = {[0]=40,[1]=4,[2]=4,[3]=4,[4]=4,[5]=4,[6]=4,[7]=4,[8]=4,[9]=4,[10]=4,[11]=4,[12]=4,[13]=4,[14]=4,[15]=4,[16]=4,[17]=4,[18]=4,[19]=4,[20]=4,[21]=4,[22]=4,[23]=4,[24]=4,[25]=4,[26]=4,[27]=4,[28]=4,[29]=4,[30]=4,[31]=43},
    [30] = {[0]=40,[1]=4,[2]=4,[3]=4,[4]=4,[5]=4,[6]=4,[7]=4,[8]=4,[9]=4,[10]=4,[11]=4,[12]=4,[13]=4,[14]=4,[15]=4,[16]=4,[17]=4,[18]=4,[19]=4,[20]=4,[21]=4,[22]=4,[23]=4,[24]=4,[25]=4,[26]=4,[27]=4,[28]=4,[29]=4,[30]=4,[31]=43},
    [31] = {[0]=56,[1]=57,[2]=57,[3]=57,[4]=57,[5]=57,[6]=57,[7]=57,[8]=57,[9]=57,[10]=57,[11]=57,[12]=57,[13]=57,[14]=57,[15]=57,[16]=57,[17]=57,[18]=57,[19]=57,[20]=57,[21]=57,[22]=57,[23]=57,[24]=57,[25]=57,[26]=57,[27]=57,[28]=57,[29]=57,[30]=57,[31]=59},
}

--[[map = {}
map.tiles = {}
map.tiles.width, map.tiles.height = 8,8
map.tiles.current = 0
map.width = 32
map.height = 32
for i=0,map.width-1 do
    map[i] = {}
    for j=0,map.height-1 do
        map[i][j] = 4
    end
end

local x = 0
local y = 0

map.sav = function(self,filename)
    local file = love.filesystem.newFile(filename)
    local file = file:open()
    file:write("local map={ \n")
    for xi,xv in ipairs(self) do
        file:write("{")
        for yo,yv in ipairs(xv) do
            file:write(yv .. ", ")
        end
        file:write("nil}, \n")
    end
    file:write("nil}, \n")
    file:write("return map")
end

local testbg = love.graphics.newImage("assets/mapa.png")
testbg:setFilter("nearest","nearest")]]


function editor_load()
    
    --[[tiles = {}
    
    k = 0
  
    for i=0,7 do
        for j=0,7 do
            tiles[k] = love.graphics.newQuad(j*8,i*8,8,8,64,64)
            k = k+1
        end
    end

    tilesBatch = love.graphics.newSpriteBatch(testbg,31*31)
  
  for i=0,31 do
    for j=0,31 do
        local x = j*8
        local y = i*8
        local quad = tiles[map[i][j]
        tilesBatch:add(quad,x,y)
    end
  end
  tilesBatch:flush()]]

end

function editor_update(dt)
    --[[camera.x = x
    camera.y = y
    
    keyUp = love.keyboard.isDown("up")
    keyDown = love.keyboard.isDown("down")
    keyLeft = love.keyboard.isDown("left")
    keyRight = love.keyboard.isDown("right")
    
    y = y + ((bool2int(keyDown)-bool2int(keyUp)))
    x = x + ((bool2int(keyRight)-bool2int(keyLeft)))
    
    if love.keyboard.isDown("1") then
        map.tiles.current = 1
    end
    
    camerax = (x*8) - 32
    cameray = (y*8) - 32

    camera.x = math.max(0,math.min(camerax,game.roomWidth-64))
    camera.y = math.max(0,math.min(cameray,game.roomHeight-64))
    
    if love.keyboard.isDown("x") then
        map[y][x] = map.tiles.current
    end]]
end

function editor_draw()
    --[[for i=0,31 do
        for j=0,31 do
           love.graphics.draw(testbg,tiles[map[i][j]]--[[,j*8,i*8)
        end
    end
    love.graphics.print(math.floor((camera.x+love.mouse.getX())/(8*game.scaleX)),50,50)
    
    love.graphics.rectangle("line",x*8,y*8,8,8)
    
    love.graphics.draw(testbg,tiles[map.tiles.current],x*8,y*8)]]
    
end

function love.mousepressed(xx,yy,btn)
    --local mapX, mapY = math.floor((camera.x-x)/(map.tiles.width*game.scaleX)), math.floor((camera.y-y)/(map.tiles.height*game.scaleY))
end

function editor_keypressed(btn)
    --[[if btn == "left" then
        x = x-1;
    elseif btn == "right" then
        x = x+1
    elseif btn == "up" then
        y = y-1
    elseif btn == "down" then
        y = y+1
    end
    
    if btn == "w" and map.tiles.current < 63 then
        map.tiles.current = map.tiles.current + 1
    elseif btn == "s" and map.tiles.current > 0 then
        map.tiles.current = map.tiles.current - 1
    end
    
    if btn == "q" then
        map.sav(map,"mapa.map")
    end]]
end